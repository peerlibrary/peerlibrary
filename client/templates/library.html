<template name="library">
  {{#unless currentPersonId}}
    <h1>Library</h1>
    <p>Sign in to view your library.</p>
  {{else}}
    <div class="row">
      {{> libraryPublications}}
      {{> libraryMyCollections}}
    </div>
  {{/unless}}
</template>

<template name="libraryPublications">
  <div class="col12">
    <h1>Library</h1>
    {{#if myLibrary.length}}
      <ol class="library-publications item-list">
        {{! We iterate over library and then use refresh to make sure publications are in the
            exactly the same order as they are listed in user's library. }}
        {{#each myLibrary}}
          {{#with this.refresh}}
            {{> publicationCatalogItem}}
          {{/with}}
        {{/each}}
      </ol>
    {{else}}
      <p class="empty-library hint">Your library is empty. Import a publication PDF or add a publication available on the site.</p>
    {{/if}}
  </div>
</template>

<template name="libraryMyCollections">
  <div class="library-collections-wrapper">
    <div class="col4 push12 sidebar library-collections">
      <h2>My Collections</h2>
      {{#if myCollections.count}}
        <ol class="item-list">
          {{#each myCollections}}
            {{> collectionCatalogItem}}
          {{/each}}
        </ol>
        <p class="drag-publications-hint hint">
          Drag and drop publications to add them to collections.
        </p>
      {{else}}
        {{> noMyCollections}}
      {{/if}}
      {{> addNewCollection}}
      {{> footer}}
    </div>
  </div>
</template>
