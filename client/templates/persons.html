<template name="persons">
  <h1>People</h1>
  <div class="row">
    <div class="col12">
      {{> catalog catalogSettings}}
    </div>
    {{> personsSidebar}}
  </div>
</template>

<template name="personsSidebar">
  <div class="col4 push12 sidebar">
    {{#if currentPersonId}}
      <h2>My Profile</h2>
      <ol class="item-list">
        {{> personCatalogItem currentPerson}}
      </ol>
    {{/if}}
    {{> footer}}
  </div>
</template>

<template name="personInlineItem">
  {{#spaceless}}
    <a class="inline-item person {{#unless user}}no-user{{/unless}}" {{collectionItemLink}}>
      {{> personAvatar}}
      <span class="name" title="{{getDisplayName}}">{{getDisplayName}}</span>
    </a>
  {{/spaceless}}
</template>

<template name="personAvatar">
  {{#spaceless}}
    {{#if isPerson}}
      {{! We check if _id exists because if data context is empty avatar method does not exist. }}
      {{#if _id}}
        <i class="avatar icon-person" title="{{status}}">
          <img src="{{avatar}}"/>
        </i>
      {{/if}}
    {{! Data context is not a person, so we assume it is options object with avatarSize and person is in the parent data context. }}
    {{else}}
      {{! We check if _id exists because if data context is empty avatar method does not exist. }}
      {{#if ../_id}}
        <i class="avatar icon-person" title="{{../status}}">
          <img src="{{../avatar avatarSize}}"/>
        </i>
      {{/if}}
    {{/if}}
  {{/spaceless}}
</template>

<template name="personCatalogItem">
  <li class="catalog-item person">
    {{#if gravatarHash}}
      {{> personAvatar avatarSize=100}}
    {{/if}}

    <div class="details">
      <h2>
        {{getDisplayName}}
      </h2>

      {{#if publications.length}}
        <p><i class="icon-publication"></i> {{publicationsCountDescription}}</p>
      {{/if}}

      {{#if inGroups.length}}
        <p><i class="icon-group"></i> Member of {{groupsCountDescription}}</p>
      {{/if}}
    </div>

    <a class="full-item-link" href="{{path}}"></a>
  </li>
</template>
